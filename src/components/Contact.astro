---
import { Mail, Phone } from "@lucide/astro";
import ContactForm from "./ContactForm.astro";
---

<section
  id="contacto"
  class="py-20
         bg-linear-to-br from-gray-50 to-green-50
         dark:from-[rgb(var(--surface))] dark:to-[rgb(var(--surface-muted))]
         transition-colors duration-300"
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center max-w-3xl mx-auto mb-16">
      <span
        class="text-[rgb(var(--accent))] dark:text-[rgb(var(--accent-strong))]
                   font-semibold text-sm uppercase tracking-wide"
      >
        Contáctanos
      </span>
      <h2
        class="mt-3 text-3xl md:text-4xl font-bold
               text-[rgb(var(--text-primary))] dark:text-[rgb(var(--text-primary))]"
      >
        ¿Listo para empezar tu proyecto?
      </h2>
      <p
        class="mt-4 text-lg text-[rgb(var(--text-muted))] dark:text-[rgb(var(--text-muted))]"
      >
        Estamos aquí para ayudarte a transformar tus ideas en realidad
      </p>
    </div>

    <div class="grid lg:grid-cols-2 gap-12 items-start">
      <div
        class="bg-white dark:bg-[rgb(var(--surface-card))]
               rounded-2xl p-8 shadow-xl
               border border-gray-100 dark:border-[rgb(var(--border))]
               transition-all duration-300"
      >
        <h3
          class="text-2xl font-bold text-[rgb(var(--text-primary))] dark:text-[rgb(var(--text-primary))] mb-6"
        >
          Envíanos un mensaje
        </h3>
        <ContactForm />
      </div>

      <div class="space-y-10">
        <div class="flex items-start gap-4">
          <div
            class="w-14 h-14 rounded-xl flex items-center justify-center shrink-0
             bg-linear-to-br from-[rgb(var(--accent))] to-[rgb(var(--accent-strong))]
             shadow-md transition-all duration-300"
          >
            <Mail class="w-6 h-6 text-white" />
          </div>
          <div>
            <h4
              class="font-semibold text-[rgb(var(--text-primary))] dark:text-[rgb(var(--text-primary))] mb-1"
            >
              Email
            </h4>
            <p
              class="text-[rgb(var(--text-muted))] dark:text-[rgb(var(--text-muted))]"
            >
              contacto@emysoftware.com
            </p>
            <p
              class="text-[rgb(var(--text-muted))] dark:text-[rgb(var(--text-muted))]"
            >
              ventas@emysoftware.com
            </p>
          </div>
        </div>

        <div class="flex items-start gap-4">
          <div
            class="w-14 h-14 rounded-xl flex items-center justify-center shrink-0
             bg-linear-to-br from-[rgb(var(--accent))] to-[rgb(var(--accent-strong))]
             shadow-md transition-all duration-300"
          >
            <Phone class="w-6 h-6 text-white" />
          </div>
          <div>
            <h4
              class="font-semibold text-[rgb(var(--text-primary))] dark:text-[rgb(var(--text-primary))] mb-1"
            >
              Teléfono
            </h4>
            <p
              class="text-[rgb(var(--text-muted))] dark:text-[rgb(var(--text-muted))]"
            >
              +51 998 629 365
            </p>
            <p
              class="text-[rgb(var(--text-muted))] dark:text-[rgb(var(--text-muted))]"
            >
              Lun - Vie: 9:00 - 18:00
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("contact-form") as HTMLFormElement;

    if (form) {
      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        const nombre = formData.get("nombre") as string;
        const email = formData.get("email") as string;
        const mensaje = formData.get("mensaje") as string;

        const phoneNumber = "51998629365";

        const whatsappMessage = `Hola, mi nombre es ${nombre}.\nEmail: ${email}\n\n${mensaje}`;

        const encodedMessage = encodeURIComponent(whatsappMessage);

        window.open(
          `https://wa.me/${phoneNumber}?text=${encodedMessage}`,
          "_blank",
        );

        form.reset();
      });
    }
  });
</script>
